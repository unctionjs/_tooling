#!/usr/bin/env ruby

require "pry"
require_relative "../source/unctionjs"

Unctionjs.command

paths = Dir[File.join("bin", "unctionjs-*")]
commands = paths.map do |path|
  {
    name: path.split("/").last.split("-").drop(1).join("-"),
    help: `ruby #{path} --help`
  }
end
readmes = commands.map do |metadata|
  <<~README
  ## #{metadata[:name]}

  ```

  #{metadata[:help]}
  ```

  README
end

header = <<~HEADER
# unctionjs tooling

This is a list of all the tools available for managing all unctionjs packages. There are two types of repository:

  - Metapackage, which are random things like the type repository and this repository
  - Package, which is a npm package

The only repository that blurs the line is `_tempLate`, which is a metapackage that we also want to maintain the same way.


HEADER

File.write("README.md", header + readmes.join)
